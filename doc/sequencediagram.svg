<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1930" height="2007"><desc>t_wallet%20-%3E%20t_swap%20%3A%20Ctl%20BuyProcedureSignature%0At_swap%20-%3E%20t_checkpoint%20%3A%20Ctl%20CheckpointSwapBobPreBuySig%0At_syncer%20%3C-%20t_swap%20%3A%20Broadcast%20Arbitrating%20Lock%0At_swap%20-%3E%20t_syncer%20%3A%20Watch%20Accordant%20Lock%0At_swap%20-%3E%20t_syncer%20%3A%20Watch%20Buy%0A%0Aparallel%0At_syncer%20-%3E%20%20t_swap%20%3A%20Arbitrating%20Lock%20final%0A%2F%2F%20TODO%3A%20maybe%20instead%20of%20checkpointing%20earlier%2C%20reach%20this%20stage%20via%20a%20message%20from%20walletd%20in%20lieu%20of%20the%20syncer%0Am_swap%20%3C-%20m_syncer%20%3A%20Arbitrating%20Lock%20final%0Aparallel%20off%0A%0Am_swap%20-%3E%20m_syncer%20%3A%20Watch%20Accordant%20Lock%0A%0Aparallel%0Am_swap%20%3C-%20m_syncer%20%3A%20Accordant%20Lock%20final%0At_swap%20%3C-%20t_syncer%20%3A%20Accordant%20Lock%20final%0Aparallel%20off%0A%0Apeerd%20%3C-%20t_swap%20%3A%20Msg%20BuyProcedureSignature%0Am_swap%20%3C-%20peerd%20%3A%20Msg%20BuyProcedureSignature%0Am_swap%20-%3E%20m_checkpoint%20%3A%20Ctl%20CheckpointSwapAlicePreBuy%0Am_swap%20-%3E%20m_syncer%3AWatch%20Buy%0Am_swap%20-%3E%20m_wallet%20%3A%20Msg%20BuyProcedureSignature%0Am_wallet%20-%3E%20m_checkpoint%20%3A%20Ctl%20CheckpointWalletAlicePreBuy%0A%3D%3DSwap%20Setup%20Complete%3D%3D%0A%3D%3DBuy%20Procedure%3A%20Bob%20is%20left%2C%20Alice%20right%3D%3D%0A%0Am_swap%20%3C-%20m_wallet%20%3A%20Fully%20signed%20buy%0Am_swap%20-%3E%20m_syncer%20%3A%20Broadcast%20buy%0Aparallel%0Am_swap%20%3C-%20m_syncer%20%3A%20Event%3A%20buy%20seen%20on%20mempool%0At_swap%20%3C-%20t_syncer%20%3A%20Event%3A%20buy%20seen%20on%20mempool%0Aparallel%20off%0At_wallet%20%3C-%20t_swap%20%3A%20Ctl%20Buy%20signature%0At_wallet%20-%3E%20t_wallet%20%3A%20recover%20accordant%20keys%0A%0A%3D%3DCancel%20Init%20t%20%3E%20t0%3A%20Bob%20is%20left%2C%20Alice%20right%2C%20either%20have%20a%20fully%20signed%20and%20valid%20cancel%20tx%2C%20and%20can%20publish%3D%3D%0A%2F%2F%20TODO%3A%20insert%20Ctl%20Tx%3A%3ACancel%20from%20wallet%20to%20swap%20(or%20do%20it%20after%20CoreArbitratingSetup%2C%20as%20in%20the%20code%20atm)%0Aparallel%0At_swap%20%3C-%20t_syncer%20%3A%20Ctl%20Cancel%20valid%0Am_swap%20%3C-%20m_syncer%20%3A%20Ctl%20Cancel%20valid%0Aparallel%20off%0A%20%E2%9E%8A%20%20-%207.7k%20sequencediagram.txt%20%20Text%20%20%E2%93%90%20Clp%20%E2%93%A8%20%E2%92%BA%20h%20%E2%93%80%20%E2%93%81%20%20Git%3Astate_recovery%20Mod%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20edit%20%20unix%20%7C%20141%3A27%20%2019%3A18%20%2070%25%0A</desc><defs/><g><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g><rect fill="white" stroke="none" x="0" y="0" width="1930" height="2007"/></g><g/><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 66.67765181469142 88.92633365700001 L 66.67765181469142 2007.3074781270006" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray="20.298181615384618,8.795878700000001"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 314.68954835805084 88.92633365700001 L 314.68954835805084 2007.3074781270006" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray="20.298181615384618,8.795878700000001"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 612.4079573525821 88.92633365700001 L 612.4079573525821 2007.3074781270006" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray="20.298181615384618,8.795878700000001"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 764.9149943804025 88.92633365700001 L 764.9149943804025 2007.3074781270006" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray="20.298181615384618,8.795878700000001"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 908.0376396235549 88.92633365700001 L 908.0376396235549 2007.3074781270006" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray="20.298181615384618,8.795878700000001"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1168.2829193456253 88.92633365700001 L 1168.2829193456253 2007.3074781270006" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray="20.298181615384618,8.795878700000001"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1426.0729073196487 88.92633365700001 L 1426.0729073196487 2007.3074781270006" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray="20.298181615384618,8.795878700000001"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1573.6944844475668 88.92633365700001 L 1573.6944844475668 2007.3074781270006" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray="20.298181615384618,8.795878700000001"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1859.4372159518637 88.92633365700001 L 1859.4372159518637 2007.3074781270006" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray="20.298181615384618,8.795878700000001"/></g><g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 13.193818050000004 17.679716187000004 L 120.16148557938283 17.679716187000004 L 120.16148557938283 88.92633365700001 L 13.193818050000004 88.92633365700001 L 13.193818050000004 17.679716187000004 Z" stroke-miterlimit="10" stroke-width="4.222021776" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="41.82440321850001" y="62.53869755700001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">t_wallet</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 262.8342012266602 17.679716187000004 L 366.54489548944144 17.679716187000004 L 366.54489548944144 88.92633365700001 L 262.8342012266602 88.92633365700001 L 262.8342012266602 17.679716187000004 Z" stroke-miterlimit="10" stroke-width="4.222021776" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="291.4647863951602" y="62.53869755700001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">t_swap</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 542.6213434365235 17.679716187000004 L 682.1945712686406 17.679716187000004 L 682.1945712686406 88.92633365700001 L 542.6213434365235 88.92633365700001 L 542.6213434365235 17.679716187000004 Z" stroke-miterlimit="10" stroke-width="4.222021776" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="571.2519286050235" y="62.53869755700001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">t_checkpoint</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 708.5822073686408 17.679716187000004 L 821.2477813921641 17.679716187000004 L 821.2477813921641 88.92633365700001 L 708.5822073686408 88.92633365700001 L 708.5822073686408 17.679716187000004 Z" stroke-miterlimit="10" stroke-width="4.222021776" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="737.2127925371408" y="62.53869755700001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">t_syncer</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 847.6354174921643 17.679716187000004 L 968.4398617549455 17.679716187000004 L 968.4398617549455 88.92633365700001 L 847.6354174921643 88.92633365700001 L 847.6354174921643 17.679716187000004 Z" stroke-miterlimit="10" stroke-width="4.222021776" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="876.2660026606643" y="62.53869755700001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">m_syncer</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 1112.3581370946058 17.679716187000004 L 1224.207701596645 17.679716187000004 L 1224.207701596645 88.92633365700001 L 1112.3581370946058 88.92633365700001 L 1112.3581370946058 17.679716187000004 Z" stroke-miterlimit="10" stroke-width="4.222021776" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1140.9887222631057" y="62.53869755700001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">m_swap</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 1378.6950153274183 17.679716187000004 L 1473.4507993118793 17.679716187000004 L 1473.4507993118793 88.92633365700001 L 1378.6950153274183 88.92633365700001 L 1378.6950153274183 17.679716187000004 Z" stroke-miterlimit="10" stroke-width="4.222021776" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1407.3256004959183" y="62.53869755700001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">peerd</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 1499.8384354118793 17.679716187000004 L 1647.5505334832544 17.679716187000004 L 1647.5505334832544 88.92633365700001 L 1499.8384354118793 88.92633365700001 L 1499.8384354118793 17.679716187000004 Z" stroke-miterlimit="10" stroke-width="4.222021776" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1528.4690205803793" y="62.53869755700001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">m_checkpoint</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 1801.8839470675434 17.679716187000004 L 1916.9904848361841 17.679716187000004 L 1916.9904848361841 88.92633365700001 L 1801.8839470675434 88.92633365700001 L 1801.8839470675434 17.679716187000004 Z" stroke-miterlimit="10" stroke-width="4.222021776" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1830.5145322360434" y="62.53869755700001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">m_wallet</text></g></g><g><g><g><rect fill="white" stroke="none" x="97.90302119969145" y="141.701605857" width="185.56115777335938" height="34.30392693"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="101.86116661469146" y="165.450478347" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Ctl BuyProcedureSignature</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 66.67765181469142 176.00553278700002 L 292.96372796905086 176.00553278700002" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray=""/><g transform="translate(314.68954835805084,176.00553278700002) translate(-314.68954835805084,-176.00553278700002)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 292.69985160805084 165.01068441200002 L 314.68954835805084 176.00553278700002 L 292.69985160805084 187.00038116200002 Z"/></g></g><g><g><rect fill="white" stroke="none" x="345.91491774305086" y="215.586986937" width="235.26767022453126" height="34.30392693"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="349.87306315805085" y="239.335859427" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Ctl CheckpointSwapBobPreBuySig</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 314.68954835805084 249.89091386700002 L 590.6821369635821 249.89091386700002" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray=""/><g transform="translate(612.4079573525821,249.89091386700002) translate(-612.4079573525821,-249.89091386700002)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 590.4182606025821 238.89606549200002 L 612.4079573525821 249.89091386700002 L 590.4182606025821 260.885762242 Z"/></g></g><g><g><rect fill="white" stroke="none" x="449.8778173604767" y="289.472368017" width="179.8489080175" height="34.30392693"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="453.8359627754767" y="313.221240507" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Broadcast Arbitrating Lock</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 314.68954835805084 323.776294947 L 743.1891739914025 323.776294947" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray=""/><g transform="translate(764.9149943804025,323.776294947) translate(-764.9149943804025,-323.776294947)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 742.9252976304025 312.781446572 L 764.9149943804025 323.776294947 L 742.9252976304025 334.771143322 Z"/></g></g><g><g><rect fill="white" stroke="none" x="462.78045102746887" y="363.357749097" width="154.04364068351563" height="34.30392693"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="466.73859644246886" y="387.106621587" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Watch Accordant Lock</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 314.68954835805084 397.661676027 L 743.1891739914025 397.661676027" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray=""/><g transform="translate(764.9149943804025,397.661676027) translate(-764.9149943804025,-397.661676027)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 742.9252976304025 386.666827652 L 764.9149943804025 397.661676027 L 742.9252976304025 408.656524402 Z"/></g></g><g><g><rect fill="white" stroke="none" x="500.67234250696106" y="437.243130177" width="78.25985772453124" height="34.30392693"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="504.63048792196105" y="460.992002667" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Watch Buy</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 314.68954835805084 471.547057107 L 743.1891739914025 471.547057107" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray=""/><g transform="translate(764.9149943804025,471.547057107) translate(-764.9149943804025,-471.547057107)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 742.9252976304025 460.552208732 L 764.9149943804025 471.547057107 L 742.9252976304025 482.541905482 Z"/></g></g><g><g><rect fill="white" stroke="none" x="469.4340002218048" y="511.128511257" width="140.73654229484376" height="34.30392693"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="473.3921456368048" y="534.877383747" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Arbitrating Lock final</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 764.9149943804025 545.432438187 L 336.4153687470508 545.432438187" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray=""/><g transform="translate(314.68954835805084,545.432438187) translate(-314.68954835805084,-545.432438187)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 336.67924510805085 534.437589812 L 314.68954835805084 545.432438187 L 336.67924510805085 556.427286562 Z"/></g></g><g><g><rect fill="white" stroke="none" x="967.7920083371682" y="511.128511257" width="140.73654229484376" height="34.30392693"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="971.7501537521682" y="534.877383747" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Arbitrating Lock final</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 908.0376396235549 545.432438187 L 1146.5570989566252 545.432438187" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray=""/><g transform="translate(1168.2829193456253,545.432438187) translate(-1168.2829193456253,-545.432438187)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 1146.2932225956254 534.437589812 L 1168.2829193456253 545.432438187 L 1146.2932225956254 556.427286562 Z"/></g></g><g><g><rect fill="white" stroke="none" x="961.1384591428323" y="585.013892337" width="154.04364068351563" height="34.30392693"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="965.0966045578323" y="608.7627648270001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Watch Accordant Lock</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1168.2829193456253 619.317819267 L 929.7634600125549 619.317819267" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray=""/><g transform="translate(908.0376396235549,619.317819267) translate(-908.0376396235549,-619.317819267)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 930.0273363735549 608.3229708920001 L 908.0376396235549 619.317819267 L 930.0273363735549 630.312667642 Z"/></g></g><g><g><rect fill="white" stroke="none" x="968.1964425412698" y="658.899273417" width="139.92767388664063" height="34.30392693"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="972.1545879562698" y="682.6481459070001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Accordant Lock final</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 908.0376396235549 693.203200347 L 1146.5570989566252 693.203200347" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray=""/><g transform="translate(1168.2829193456253,693.203200347) translate(-1168.2829193456253,-693.203200347)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 1146.2932225956254 682.2083519720001 L 1168.2829193456253 693.203200347 L 1146.2932225956254 704.198048722 Z"/></g></g><g><g><rect fill="white" stroke="none" x="469.83843442590637" y="658.899273417" width="139.92767388664063" height="34.30392693"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="473.79657984090636" y="682.6481459070001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Accordant Lock final</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 764.9149943804025 693.203200347 L 336.4153687470508 693.203200347" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray=""/><g transform="translate(314.68954835805084,693.203200347) translate(-314.68954835805084,-693.203200347)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 336.67924510805085 682.2083519720001 L 314.68954835805084 693.203200347 L 336.67924510805085 704.198048722 Z"/></g></g><g><g><rect fill="white" stroke="none" x="772.7116032368381" y="732.784654497" width="195.33924920402345" height="34.30392693"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="776.6697486518381" y="756.5335269870001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Msg BuyProcedureSignature</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 314.68954835805084 767.088581427 L 1404.3470869306486 767.088581427" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray=""/><g transform="translate(1426.0729073196487,767.088581427) translate(-1426.0729073196487,-767.088581427)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 1404.0832105696488 756.0937330520001 L 1426.0729073196487 767.088581427 L 1404.0832105696488 778.083429802 Z"/></g></g><g><g><rect fill="white" stroke="none" x="1199.5082887306253" y="806.670035577" width="195.33924920402345" height="34.30392693"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1203.4664341456253" y="830.4189080670001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Msg BuyProcedureSignature</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1426.0729073196487 840.973962507 L 1190.0087397346254 840.973962507" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray=""/><g transform="translate(1168.2829193456253,840.973962507) translate(-1168.2829193456253,-840.973962507)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 1190.2726160956252 829.9791141320001 L 1168.2829193456253 840.973962507 L 1190.2726160956252 851.968810882 Z"/></g></g><g><g><rect fill="white" stroke="none" x="1261.1036155636273" y="880.555416657" width="219.7701726659375" height="34.30392693"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1265.0617609786273" y="904.3042891470001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Ctl CheckpointSwapAlicePreBuy</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1168.2829193456253 914.859343587 L 1551.9686640585667 914.859343587" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray=""/><g transform="translate(1573.6944844475668,914.859343587) translate(-1573.6944844475668,-914.859343587)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 1551.7047876975669 903.8644952120001 L 1573.6944844475668 914.859343587 L 1551.7047876975669 925.854191962 Z"/></g></g><g><g><rect fill="white" stroke="none" x="999.0303506223245" y="954.440797737" width="78.25985772453124" height="34.30392693"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1002.9884960373245" y="978.1896702270001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Watch Buy</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1168.2829193456253 988.744724667 L 929.7634600125549 988.744724667" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray=""/><g transform="translate(908.0376396235549,988.744724667) translate(-908.0376396235549,-988.744724667)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 930.0273363735549 977.7498762920001 L 908.0376396235549 988.744724667 L 930.0273363735549 999.739573042 Z"/></g></g><g><g><rect fill="white" stroke="none" x="1416.1904430467328" y="1028.326178817" width="195.33924920402345" height="34.30392693"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1420.1485884617327" y="1052.075051307" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Msg BuyProcedureSignature</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1168.2829193456253 1062.630105747 L 1837.7113955628636 1062.630105747" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray=""/><g transform="translate(1859.4372159518637,1062.630105747) translate(-1859.4372159518637,-1062.630105747)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 1837.4475192018638 1051.635257372 L 1859.4372159518637 1062.630105747 L 1837.4475192018638 1073.624954122 Z"/></g></g><g><g><rect fill="white" stroke="none" x="1604.9198538325668" y="1102.2115598970001" width="223.29199273429688" height="34.30392693"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1608.8779992475668" y="1125.960432387" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Ctl CheckpointWalletAlicePreBuy</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1859.4372159518637 1136.5154868270001 L 1595.4203048365669 1136.5154868270001" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray=""/><g transform="translate(1573.6944844475668,1136.5154868270001) translate(-1573.6944844475668,-1136.5154868270001)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 1595.6841811975667 1125.5206384520002 L 1573.6944844475668 1136.5154868270001 L 1595.6841811975667 1147.510335202 Z"/></g></g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 13.19381805 1197.646843792 L 1916.80618195 1197.646843792 M 13.19381805 1206.442722492 L 1916.80618195 1206.442722492 M 13.19381805 1215.238601192 L 1916.80618195 1215.238601192" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray=""/><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 855.1224644892968 1176.096940977 L 1074.8775355107032 1176.096940977 L 1074.8775355107032 1236.788504007 L 855.1224644892968 1236.788504007 Z" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="892.0651550292969" y="1213.0396315169999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Swap Setup Complete</text></g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 13.19381805 1297.919860972 L 1916.80618195 1297.919860972 M 13.19381805 1306.715739672 L 1916.80618195 1306.715739672 M 13.19381805 1315.511618372 L 1916.80618195 1315.511618372" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray=""/><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 807.0552266352929 1276.369958157 L 1122.944773364707 1276.369958157 L 1122.944773364707 1337.061521187 L 807.0552266352929 1337.061521187 Z" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="843.997917175293" y="1313.3126486969998" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Buy Procedure: Bob is left, Alice right</text></g><g><g><rect fill="white" stroke="none" x="1456.934873588725" y="1376.642975337" width="113.85038812003906" height="34.30392693"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="1460.893019003725" y="1400.391847827" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Fully signed buy</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1859.4372159518637 1410.946902267 L 1190.0087397346254 1410.946902267" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray=""/><g transform="translate(1168.2829193456253,1410.946902267) translate(-1168.2829193456253,-1410.946902267)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 1190.2726160956252 1399.952053892 L 1168.2829193456253 1410.946902267 L 1190.2726160956252 1421.941750642 Z"/></g></g><g><g><rect fill="white" stroke="none" x="987.3446053830667" y="1450.5283564170002" width="101.63134820304687" height="34.30392693"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="991.3027507980667" y="1474.277228907" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Broadcast buy</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 1168.2829193456253 1484.8322833470002 L 929.7634600125549 1484.8322833470002" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray=""/><g transform="translate(908.0376396235549,1484.8322833470002) translate(-908.0376396235549,-1484.8322833470002)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 930.0273363735549 1473.8374349720002 L 908.0376396235549 1484.8322833470002 L 930.0273363735549 1495.827131722 Z"/></g></g><g><g><rect fill="white" stroke="none" x="939.263009008555" y="1524.4137374970003" width="197.79454095207032" height="34.30392693"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="943.2211544235549" y="1548.1626099870002" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Event: buy seen on mempool</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 908.0376396235549 1558.7176644270003 L 1146.5570989566252 1558.7176644270003" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray=""/><g transform="translate(1168.2829193456253,1558.7176644270003) translate(-1168.2829193456253,-1558.7176644270003)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 1146.2932225956254 1547.7228160520003 L 1168.2829193456253 1558.7176644270003 L 1146.2932225956254 1569.7125128020002 Z"/></g></g><g><g><rect fill="white" stroke="none" x="440.9050008931915" y="1524.4137374970003" width="197.79454095207032" height="34.30392693"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="444.8631463081915" y="1548.1626099870002" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Event: buy seen on mempool</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 764.9149943804025 1558.7176644270003 L 336.4153687470508 1558.7176644270003" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray=""/><g transform="translate(314.68954835805084,1558.7176644270003) translate(-314.68954835805084,-1558.7176644270003)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 336.67924510805085 1547.7228160520003 L 314.68954835805084 1558.7176644270003 L 336.67924510805085 1569.7125128020002 Z"/></g></g><g><g><rect fill="white" stroke="none" x="130.90944514988678" y="1598.2991185770004" width="119.54830987296874" height="34.30392693"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="134.86759056488677" y="1622.0479910670003" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Ctl Buy signature</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 314.68954835805084 1632.6030455070004 L 88.40347220369142 1632.6030455070004" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray=""/><g transform="translate(66.67765181469142,1632.6030455070004) translate(-66.67765181469142,-1632.6030455070004)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 88.66734856469142 1621.6081971320004 L 66.67765181469142 1632.6030455070004 L 88.66734856469142 1643.5978938820003 Z"/></g></g><g><g><rect fill="white" stroke="none" x="97.90302119969142" y="1672.1844996570005" width="159.46952874503907" height="34.30392693"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="101.86116661469143" y="1695.9333721470005" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">recover accordant keys</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 66.67765181469142 1706.4884265870005 L 172.22819621469142 1706.4884265870005 L 172.22819621469142 1740.7923535170005 L 88.40347220369142 1740.7923535170005" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray=""/><g transform="translate(66.67765181469142,1740.7923535170005) translate(-66.67765181469142,-1740.7923535170005)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 88.66734856469142 1729.7975051420005 L 66.67765181469142 1740.7923535170005 L 88.66734856469142 1751.7872018920004 Z"/></g></g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 13.19381805 1801.9237104820006 L 1916.80618195 1801.9237104820006 M 13.19381805 1810.7195891820006 L 1916.80618195 1810.7195891820006 M 13.19381805 1819.5154678820006 L 1916.80618195 1819.5154678820006" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray=""/><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 599.4462254756249 1780.3738076670006 L 1330.553774524375 1780.3738076670006 L 1330.553774524375 1841.0653706970006 L 599.4462254756249 1841.0653706970006 Z" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="636.388916015625" y="1817.3164982070004" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Cancel Init t &gt; t0: Bob is left, Alice right, either have a fully signed and valid cancel tx, and can publish</text></g><g><g><rect fill="white" stroke="none" x="484.9207403341095" y="1880.6468248470007" width="109.76306207023437" height="34.30392693"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="488.8788857491095" y="1904.3956973370007" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Ctl Cancel valid</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 764.9149943804025 1914.9507517770007 L 336.4153687470508 1914.9507517770007" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray=""/><g transform="translate(314.68954835805084,1914.9507517770007) translate(-314.68954835805084,-1914.9507517770007)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 336.67924510805085 1903.9559034020008 L 314.68954835805084 1914.9507517770007 L 336.67924510805085 1925.9456001520007 Z"/></g></g><g><g><rect fill="white" stroke="none" x="983.2787484494729" y="1880.6468248470007" width="109.76306207023437" height="34.30392693"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="987.2368938644729" y="1904.3956973370007" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Ctl Cancel valid</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 908.0376396235549 1914.9507517770007 L 1146.5570989566252 1914.9507517770007" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray=""/><g transform="translate(1168.2829193456253,1914.9507517770007) translate(-1168.2829193456253,-1914.9507517770007)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 1146.2932225956254 1903.9559034020008 L 1168.2829193456253 1914.9507517770007 L 1146.2932225956254 1925.9456001520007 Z"/></g></g></g><g/><g/><g/><g/><g/><g/><g/><g/><g/></g></svg>